plugins {
    id "org.jetbrains.kotlin.js"
    id "org.jetbrains.dokka"
    id "com.vanniktech.maven.publish"
}

repositories {
    mavenCentral()
    jcenter()
}

kotlin() {
    target {
        nodejs {

        }
    }
}

dependencies {
    api "org.jetbrains.kotlin:kotlin-stdlib-js:1.3.72"
}

dokka {
    kotlinTasks {
        // dokka fails to retrieve sources from MPP-tasks so they must be set empty to avoid exception
        // use sourceRoot instead (see below)
        []
    }
    sourceRoot {
        path = kotlin.sourceSets.main.kotlin.srcDirs[0]
        platforms = ["JS"]
    }
}

apply from: "maven-publish.gradle"